<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>TestX Protocol ($TESTX) - Testing on Base Sepolia</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js" type="text/javascript"></script>
    <style>
        :root { 
            --green: #00FF00; --fire-orange: #FF4500; --gold: #FFD700; --dark-orange: #FF8C00; 
            --glass: rgba(255,140,0,0.3); --dark-glass: rgba(0,0,0,0.7); 
        }
        body { margin:0; font-family: 'Segoe UI', Arial, sans-serif; 
               background: linear-gradient(135deg, var(--dark-orange), var(--fire-orange)); color: white; min-height: 100vh; }
        .container { max-width: 960px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 60px 20px; backdrop-filter: blur(12px); 
                 background: var(--glass); border-radius: 24px; margin-bottom: 30px; 
                 box-shadow: 0 8px 32px rgba(255,69,0,0.5); border: 2px solid var(--gold); }
        .logo-img { width: 300px; margin-bottom: 20px; border-radius: 50%; border: 8px solid var(--gold); box-shadow: 0 0 60px var(--fire-orange); }
        h1 { font-size: 3.5em; margin: 10px 0; color: black; text-shadow: 0 4px 12px white; }
        .tagline { font-size: 1.8em; font-weight: bold; margin: 20px 0; 
                   color: white; text-shadow: 0 2px 8px black; }
        .warning { 
            background: #000000; padding: 20px; border-radius: 12px; 
            margin: 20px 0; text-align: center; font-weight: bold; font-size: 1.2em; 
            border: 2px solid var(--gold); 
        }
        .info { text-align: center; padding: 20px; }
        #connectBtn { 
            background: linear-gradient(45deg, white, var(--gold)); color: black;
            padding: 18px 40px; font-size: 1.6em; font-weight: bold; border: none; border-radius: 50px; 
            cursor: pointer; box-shadow: 0 0 30px white; 
            transition: all 0.4s; text-transform: uppercase; letter-spacing: 2px;
        }
        #connectBtn:hover { transform: scale(1.1) rotate(2deg); box-shadow: 0 0 50px white; }
        #connectBtn.connected { 
            background: linear-gradient(45deg, #00FF00, #32CD32); 
            cursor: default; 
        }
        .wallet-address { font-size: 1.4em; margin-top: 15px; color: white; display: none; font-weight: bold; }
        nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-bottom: 40px; }
        nav button { background: var(--glass); border: 1px solid var(--gold); padding: 14px 28px; 
                     border-radius: 50px; color: white; font-size: 1.1em; cursor: pointer; 
                     backdrop-filter: blur(10px); transition: all 0.3s; }
        nav button:hover, nav button.active { background: linear-gradient(var(--gold), white); color: black;
                                              transform: translateY(-3px); box-shadow: 0 6px 20px white; }
        .section { display: none; background: var(--glass); backdrop-filter: blur(15px); 
                   border-radius: 24px; padding: 30px; margin-bottom: 30px; 
                   box-shadow: 0 8px 32px rgba(255,69,0,0.4); border: 1px solid var(--gold); }
        .section.active { display: block; }
        .card { background: #000000; border-radius: 18px; padding: 24px; margin: 20px 0; border: 1px solid var(--gold); }
        input[type="number"] { padding: 14px; border-radius: 12px; border: none; background: rgba(255,255,255,0.2); color: white; width: 100%; font-size: 1.1em; }
        button.main-btn { background: linear-gradient(var(--gold), white); padding: 16px; font-size: 1.3em; width: 100%; margin-top: 10px; 
                          cursor: pointer; border: none; border-radius: 12px; color: black; font-weight: bold; }
        button.main-btn:disabled { background: #888; cursor: not-allowed; opacity: 0.6; }
        .stat { font-size: 1.5em; margin: 15px 0; }
        .progress { height: 32px; background: rgba(255,255,255,0.3); border-radius: 16px; overflow: hidden; margin: 20px 0; position: relative; }
        .bar { height: 100%; background: linear-gradient(to right, white, var(--gold)); width: 0%; transition: width 1s ease; }
        .progress-text { position: absolute; width: 100%; text-align: center; line-height: 32px; font-weight: bold; color: black; }
        .presale-header { background: #000000; color: white; padding: 16px 24px; border-radius: 18px; border: 1px solid var(--gold); text-align: center; font-size: 1.6em; font-weight: bold; margin-bottom: 20px; }
        footer { text-align: center; padding: 40px; margin-top: 50px; font-size: 1.1em; color: #000000; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="https://cdn.discordapp.com/attachments/1295797949774135326/1319930299171188766/image.png" alt="$TESTX Logo" class="logo-img">
            <h1>TestX Protocol ($TESTX)</h1>
            <p class="tagline">Our goal is not speed ‚Äî it is legacy.</p>
        </header>

        <div class="warning">
            ‚ö†Ô∏è TESTING ON BASE SEPOLIA (TESTNET) ‚ö†Ô∏è<br>
            Token Contract: <span id="contractAddrDisplay">0x45d1c787A0d86AE8d7FEa33412a5d80d86B7445b</span>
        </div>

        <div class="info">
            <button id="connectBtn">Connect Wallet</button>
            <p class="wallet-address" id="walletAddress"></p>
        </div>

        <nav>
            <button class="active" data-section="presale">Presale</button>
            <button data-section="staking">Staking</button>
            <button data-section="rewards">Staking Reward</button>
            <button data-section="vesting">Vesting</button>
            <button data-section="airdrop">Airdrop</button>
            <button data-section="whitepaper">Whitepaper</button>
        </nav>

        <div id="presale" class="section active">
            <div class="presale-header">
                Presale ‚Äì 0.000125 ETH per $TESTX (8,000 $TESTX per 1 ETH)
            </div>
            <div class="card">
                <p class="stat">Your $TESTX Balance: <strong><span id="userBalance">0</span> $TESTX</strong></p>
                <p class="stat">Total Supply: <strong><span id="totalSupply">0</span> $TESTX</strong></p>
                <p style="font-size:1.1em; opacity:0.9;">Min: 0.0125 ETH ‚Ä¢ Max: 1.25 ETH</p>
                <input type="number" id="ethAmount" placeholder="Enter ETH amount" step="0.001">
                <p id="tokenPreview" class="preview">You'll receive: 0 $TESTX</p>
                <button id="contributeBtn" class="main-btn" disabled>Contribute ETH (Presale Coming Soon)</button>
            </div>
        </div>

        <!-- Other sections placeholder -->
        <div id="staking" class="section"><h2>Staking (Deploy contract first)</h2></div>
        <div id="rewards" class="section"><h2>Staking Rewards (Coming after staking)</h2></div>
        <div id="vesting" class="section"><h2>Vesting (Coming soon)</h2></div>
        <div id="airdrop" class="section"><h2>Airdrop (Coming later)</h2></div>
        <div id="whitepaper" class="section"><h2>Whitepaper (Coming soon)</h2></div>

        <footer>
            ¬© 2025 TestX Protocol ‚Ä¢ Testing on Base Sepolia<br>
            Do NOT send real ETH ‚Äî Testnet Only üî•
        </footer>
    </div>

    <script>
        const TOKEN_ADDRESS = "0x45d1c787A0d86AE8d7FEa33412a5d80d86B7445b";
        const BASE_SEPOLIA_CHAIN_ID = "0x14a34"; // 84532 in hex

        const TOKEN_ABI = [
            "function name() view returns (string)",
            "function symbol() view returns (string)",
            "function totalSupply() view returns (uint256)",
            "function balanceOf(address) view returns (uint256)",
            "function decimals() view returns (uint8)"
        ];

        let provider, signer, tokenContract, userAddress;

        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert('Please install MetaMask!');
                return;
            }

            try {
                // Request account access
                await window.ethereum.request({ method: 'eth_requestAccounts' });

                // Switch to Base Sepolia
                try {
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: BASE_SEPOLIA_CHAIN_ID }],
                    });
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: BASE_SEPOLIA_CHAIN_ID,
                                chainName: 'Base Sepolia',
                                nativeCurrency: { name: 'ETH', symbol: 'ETH', decimals: 18 },
                                rpcUrls: ['https://sepolia.base.org'],
                                blockExplorerUrls: ['https://sepolia.basescan.org']
                            }],
                        });
                    }
                }

                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();

                tokenContract = new ethers.Contract(TOKEN_ADDRESS, TOKEN_ABI, provider);

                // Update UI
                document.getElementById('connectBtn').textContent = 'Connected';
                document.getElementById('connectBtn').classList.add('connected');
                document.getElementById('connectBtn').disabled = true;

                document.getElementById('walletAddress').textContent = userAddress.slice(0,6) + '...' + userAddress.slice(-4) + ' üî•';
                document.getElementById('walletAddress').style.display = 'block';

                await updateBalance();
            } catch (error) {
                console.error(error);
                alert('Connection failed: ' + error.message);
            }
        }

        async function updateBalance() {
            if (!tokenContract || !userAddress) return;

            const balance = await tokenContract.balanceOf(userAddress);
            const decimals = await tokenContract.decimals();
            const formatted = ethers.utils.formatUnits(balance, decimals);

            const total = await tokenContract.totalSupply();
            const totalFormatted = ethers.utils.formatUnits(total, decimals);

            document.getElementById('userBalance').textContent = parseFloat(formatted).toFixed(2);
            document.getElementById('totalSupply').textContent = parseFloat(totalFormatted).toLocaleString();
        }

        // Preview tokens on input
        document.getElementById('ethAmount').addEventListener('input', () => {
            const eth = parseFloat(document.getElementById('ethAmount').value) || 0;
            const tokens = eth * 8000;
            document.getElementById('tokenPreview').textContent = `You'll receive: ${tokens.toFixed(0)} $TESTX`;
        });

        // Nav tabs
        document.querySelectorAll('nav button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.section).classList.add('active');
            });
        });

        document.getElementById('connectBtn').addEventListener('click', connectWallet);

        // Auto update on account/network change
        if (window.ethereum) {
            window.ethereum.on('accountsChanged', () => location.reload());
            window.ethereum.on('chainChanged', () => location.reload());
        }
    </script>
</body>
</html>